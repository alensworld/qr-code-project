<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Kod Oluşturucu</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
</head>
<body>
    <h1>QR Kod Oluşturucu</h1>
    <label for="url">QR kodu oluşturmak için URL girin:</label><br>
    <input type="text" id="url" placeholder="Örneğin: https://example.com" required><br><br>

    <button onclick="generateQRCode()">QR Kodu Oluştur</button>
    <button onclick="downloadQRCode()">QR Kodunu İndir</button>

    <h2>QR Kodu (Ön İzleme):</h2>
    <canvas id="preview-canvas" width="500" height="500" style="border: 1px solid #000;"></canvas>

    <script>
        let qrPreview; // Ön izleme için QR kodu
        let qrDownloadCanvas; // İndirme için QR kodu

        function generateQRCode() {
            const url = document.getElementById('url').value.trim();

            if (!url) {
                alert('Lütfen geçerli bir URL girin.');
                return;
            }

            // 1. Ön İzleme için QR Kodunu Oluştur
            qrPreview = new QRious({
                element: document.getElementById('preview-canvas'),
                value: url,
                size: 500, // Ön izleme boyutu
            });

            // 2. İndirme için Yüksek Çözünürlüklü QR Kodunu Hazırla
            qrDownloadCanvas = document.createElement('canvas'); // Yeni bir canvas oluştur
            qrDownloadCanvas.width = 5906; // Genişlik (50 cm)
            qrDownloadCanvas.height = 7087; // Yükseklik (60 cm)

            const ctx = qrDownloadCanvas.getContext('2d');

            // QR kodunu kare olarak oluştur
            const qrHighRes = new QRious({
                value: url,
                size: 5906, // Kare boyut
            });

            // QR kodu yüksek çözünürlüklü canvas üzerine yerleştir
            const qrImage = new Image();
            qrImage.src = qrHighRes.toDataURL();
            qrImage.onload = () => {
                const xOffset = (qrDownloadCanvas.width - 5906) / 2;
                const yOffset = (qrDownloadCanvas.height - 5906) / 2;
                ctx.drawImage(qrImage, xOffset, yOffset, 5906, 5906);
            };
        }

        function downloadQRCode() {
            if (!qrDownloadCanvas) {
                alert('Önce bir QR kodu oluşturun.');
                return;
            }

            // İndirme işlemi
            const link = document.createElement('a');
            link.download = 'qr-code.png';
            link.href = qrDownloadCanvas.toDataURL();
            link.click();
        }
    </script>
</body>
</html>
